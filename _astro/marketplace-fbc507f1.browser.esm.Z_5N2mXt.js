import{m as u,X as f,o as E,Q as y,x as a,B as p,bc as I}from"./Login.VljSKXrW.js";import{I as C,a as R,D as w}from"./QueryParams-c7566bb2.browser.esm.JB0fHRhb.js";async function g(e,o,t,i,d){try{const l=(await u(()=>import("./IERC165.rumQzOOh.js"),__vite__mapDeps([]))).default,c=new f(t,l,e),[v,A]=await Promise.all([c.supportsInterface(C),c.supportsInterface(R)]);if(v){const s=(await u(()=>import("./Login.VljSKXrW.js").then(T=>T.dk),__vite__mapDeps([0,1,2,3,4]))).default,n=new f(t,s,e);if(await n.isApprovedForAll(d,o))return!0;let r;try{r=await n.getApproved(i)}catch{}return r?.toLowerCase()===o.toLowerCase()}else if(A){const s=(await u(()=>import("./Login.VljSKXrW.js").then(_=>_.dm),__vite__mapDeps([0,1,2,3,4]))).default;return await new f(t,s,e).isApprovedForAll(d,o)}else return console.error("Contract does not implement ERC 1155 or ERC 721."),!1}catch(l){return console.error("Failed to check if token is approved",l),!1}}async function m(e,o,t,i,d){const l=(await u(()=>import("./IERC165.rumQzOOh.js"),__vite__mapDeps([]))).default,c=new E(e.getSignerOrProvider(),t,l,e.options,e.storage),[v,A]=await Promise.all([c.read("supportsInterface",[C]),c.read("supportsInterface",[R])]);if(v){const s=(await u(()=>import("./Login.VljSKXrW.js").then(r=>r.dk),__vite__mapDeps([0,1,2,3,4]))).default,n=new E(e.getSignerOrProvider(),t,s,e.options,e.storage);await n.read("isApprovedForAll",[d,o])||(await n.read("getApproved",[i])).toLowerCase()===o.toLowerCase()||await n.sendTransaction("setApprovalForAll",[o,!0])}else if(A){const s=(await u(()=>import("./Login.VljSKXrW.js").then(r=>r.dm),__vite__mapDeps([0,1,2,3,4]))).default,n=new E(e.getSignerOrProvider(),t,s,e.options,e.storage);await n.read("isApprovedForAll",[d,o])||await n.sendTransaction("setApprovalForAll",[o,!0])}else throw Error("Contract must implement ERC 1155 or ERC 721.")}function L(e){switch(a(e.assetContractAddress!==void 0&&e.assetContractAddress!==null),a(e.buyoutPricePerToken!==void 0&&e.buyoutPricePerToken!==null),a(e.listingDurationInSeconds!==void 0&&e.listingDurationInSeconds!==null),a(e.startTimestamp!==void 0&&e.startTimestamp!==null),a(e.tokenId!==void 0&&e.tokenId!==null),a(e.quantity!==void 0&&e.quantity!==null),e.type){case"NewAuctionListing":a(e.reservePricePerToken!==void 0&&e.reservePricePerToken!==null)}}async function b(e,o,t){return{quantity:t.quantityDesired,pricePerToken:t.pricePerToken,currencyContractAddress:t.currency,buyerAddress:t.offeror,quantityDesired:t.quantityWanted,currencyValue:await y(e,t.currency,t.quantityWanted.mul(t.pricePerToken)),listingId:o}}function k(e,o,t){return t=p.from(t),e=p.from(e),o=p.from(o),e.eq(p.from(0))?!1:o.sub(e).mul(I).div(e).gte(t)}async function D(e,o,t){const i=[];for(;o-e>w;)i.push(t(e,e+w-1)),e+=w;return i.push(t(e,o-1)),await Promise.all(i)}export{g as a,D as g,m as h,k as i,b as m,L as v};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["_astro/Login.VljSKXrW.js","_astro/jsx-runtime.7BJwlAz-.js","_astro/index.9orYzNvn.js","_astro/tokens.xyBxlAX2.js","_astro/index.JdUBUp0J.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
