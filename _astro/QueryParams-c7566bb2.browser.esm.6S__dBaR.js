import{aM as m,B as i,aF as g,m as u,ad as l}from"./Login.kXXM0ZeX.js";import{a as d,C as E}from"./setErc20Allowance-832742d0.browser.esm.5FZ1S9fi.js";const h=m("0x80ac58cd"),C=m("0xd9b67a26"),w={name:"Failed to load NFT metadata"};async function R(t,a,e){if(a.startsWith("data:application/json;base64")&&typeof Buffer<"u"){const o=a.split(",")[1],s=JSON.parse(Buffer.from(o,"base64").toString("utf-8"));return d.parse({...s,id:i.from(t).toString(),uri:a})}const n=a.replace("{id}",g(i.from(t).toHexString(),32).slice(2));let r;try{r=await e.downloadJSON(n)}catch{const s=a.replace("{id}",i.from(t).toString());try{r=await e.downloadJSON(s)}catch{console.warn(`failed to get token metadata: ${JSON.stringify({tokenId:t.toString(),tokenUri:a})} -- falling back to default metadata`),r=w}}return d.parse({...r,id:i.from(t).toString(),uri:a})}async function N(t,a,e,n){let r;const o=(await u(()=>import("./IERC165.rumQzOOh.js"),__vite__mapDeps([]))).default,s=new l(t,o,a),[p,_]=await Promise.all([s.supportsInterface(h),s.supportsInterface(C)]);if(p){const c=(await u(()=>import("./Login.kXXM0ZeX.js").then(f=>f.dl),__vite__mapDeps([0,1,2]))).default;r=await new l(t,c,a).tokenURI(e)}else if(_){const c=(await u(()=>import("./Login.kXXM0ZeX.js").then(f=>f.dn),__vite__mapDeps([0,1,2]))).default;r=await new l(t,c,a).uri(e)}else throw Error("Contract must implement ERC 1155 or ERC 721.");return r?R(e,r,n):d.parse({...w,id:i.from(e).toString(),uri:""})}async function O(t,a){return typeof t=="string"?t:await a.upload(E.parse(t))}async function S(t,a,e,n){if(y(t))return t;if(I(t))return await a.uploadBatch(t.map(o=>E.parse(o)),{rewriteFileNames:{fileStartNumber:e||0},onProgress:n?.onProgress});throw new Error("NFT metadatas must all be of the same type (all URI or all NFTMetadataInput)")}function A(t){const a=t[0].substring(0,t[0].lastIndexOf("/"));for(let e=0;e<t.length;e++){const n=t[e].substring(0,t[e].lastIndexOf("/"));if(a!==n)throw new Error(`Can only create batches with the same base URI for every entry in the batch. Expected '${a}' but got '${n}'`)}return a.replace(/\/$/,"")+"/"}function y(t){return t.find(a=>typeof a!="string")===void 0}function I(t){return t.find(a=>typeof a!="object")===void 0}const M=100;export{M as D,w as F,h as I,R as a,S as b,C as c,N as f,A as g,O as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["_astro/Login.kXXM0ZeX.js","_astro/index.hfxd0CuE.js","_astro/tokens.xGG2VBAi.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
